{% extends 'base.html' %}

{% load static crispy_forms_tags %}

{% block stylesheet %}
<link rel="stylesheet" type="text/css" href="{% static 'lib/select2/css/select2.min.css' %}" />
{% endblock %}

{% block javascript %}
<script src="{% static 'lib/bs-custom-file-input/bs-custom-file-input.js' %}"></script>
<script src="{% static 'lib/jquery.maskedinput/jquery.maskedinput.js' %}" type="text/javascript"></script>
<script src="{% static 'lib/select2/js/select2.full.min.js' %}" type="text/javascript"></script>
{% endblock javascript %}

{% block inline_javascript %}
<script type="text/javascript">
  window.addEventListener('DOMContentLoaded', function () {
    $('.inputfile').each(function () {
      var $input = $(this),
        $label = $input.next('label'),
        labelVal = $label.html();

      $input.on('change', function (e) {
        var fileName = '';

        if (this.files && this.files.length > 1)
          fileName = (this.getAttribute('data-multiple-caption') || '').replace('{count}', this.files
            .length);
        else if (e.target.value)
          fileName = e.target.value.split('\\').pop();

        if (fileName)
          $label.find('span').html(fileName);
        else
          $label.html(labelVal);
      });
    });

    // Custom input file
    bsCustomFileInput.init();

    $(".select2").select2({
      width: '100%',
    });

    $("[data-mask='date']").mask("99/99/9999");

  });

</script>
{% endblock %}

{% block content %}

<input type="hidden" id="dataset-id" value="{{ dataset.id }}">

<div class="page-head">
  <nav aria-label="breadcrumb" role="navigation">
    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <a href="{% url 'core:home' %}">Home</a>
      </li>
      <li class="breadcrumb-item">
        <a href="{% url 'core:datasets' %}"><i class="breadcrumb-icon fa fa-angle-left"></i>Datasets</a>
      </li>
      <li class="breadcrumb-item active">
        <a href="{% url 'core:single_dataset' dataset.uuid  %}"><i
            class="breadcrumb-icon fa fa-angle-left"></i>{{ dataset.title }}</a>
      </li>
    </ol>
  </nav>
  <h2 class="page-head-title">Update dataset</h2>
</div>

<div class="main-content container-fluid">

  <div class="row">
    <div class="col-md-8">
      <div class="card">
        <div class="card-body">
          <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {% crispy form %}
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock content %}
