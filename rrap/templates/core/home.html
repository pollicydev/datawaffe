{% extends "base.html" %}
{% load static humanize wagtailimages_tags core_tags %}

{% block stylesheet %}
<link media="screen" href="{% static 'vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">
<link media="screen" href="{% static 'vendor/aos/dist/aos.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}

<section class="bg-dark dark-mode d-flex min-vh-100 position-relative overflow-hidden pb-5">
  <div
    class="container d-flex flex-column justify-content-center position-relative zindex-2 pt-sm-3 pt-md-4 pt-xl-5 pb-1 pb-sm-3 pb-lg-4 pb-xl-5">
    <div class="row flex-lg-nowrap align-items-center pb-5 pt-2 pt-lg-4 pt-xl-0 mt-lg-4 mt-xl-0">
      <div class="col-lg-7 order-lg-2 ms-lg-4 mb-2 mb-lg-0">
        <div class="parallax order-lg-2 mx-auto" style="max-width: 740px;">
          <div class="parallax-layer" data-depth="0.05"><img src="{% static 'images/landing/saas-2/hero/01.png' %}"
              alt="Layer">
          </div>
          <div class="parallax-layer" data-depth="-0.05"><img src="{% static 'images/landing/saas-2/hero/02.png' %}"
              style="animation: rotate-cw 100s linear infinite;" alt="Layer"></div>
          {% comment %} <div class="parallax-layer zindex-2" data-depth="0.3"><img
              src="{% static 'images/landing/saas-2/hero/03.png' %}" alt="Layer"></div>
          <div class="parallax-layer zindex-2" data-depth="0.15"><img
              src="{% static 'images/landing/saas-2/hero/04.png' %}" alt="Layer"></div>
          <div class="parallax-layer zindex-2" data-depth="0.4"><img
              src="{% static 'images/landing/saas-2/hero/05.png' %}" alt="Layer"></div> {% endcomment %}
        </div>
      </div>
      <div class="col-lg-5 order-lg-1 text-center text-lg-start me-xl-5"><span
          class="badge bg-faded-warning text-warning fs-sm">Leave No One Behind&nbsp; ðŸš€</span>
        <h1 class="display-5 py-3 my-2 mb-xl-3">Explore data on {{ total_organisations }} LGBT and Sex Work
          organisations across Uganda </h1>
        <ul class="list-unstyled d-table text-start mx-auto mx-lg-0 mb-0">
          <li class="d-flex pb-2 mb-1"><i class="ai-check-alt text-primary lead me-2"></i>Open data to aid inclusive
            governance and improve access to social services</li>
          <li class="d-flex pb-2 mb-1"><i class="ai-check-alt text-primary lead me-2"></i>Data visualization for faster
            decision making</li>
          <li class="d-flex pb-2 mb-1"><i class="ai-check-alt text-primary lead me-2"></i>Measure impact on key
            populations wellbeing</li>
        </ul>
        <div class="d-flex justify-content-center justify-content-lg-start pt-4 pt-xl-5">
          <div class="text-center">
            {% if request.user.is_authenticated %}
            <a class="btn btn-lg btn-primary rounded-pill w-100 w-sm-auto" href="/map">Explore the impact</a>
            {% else %}
            <a class="btn btn-lg btn-primary rounded-pill w-100 w-sm-auto" href="{% url 'account_signup' %}">Get
              started</a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- Features-->
<section class="bg-secondary py-5">
  <div class="container mt-1 py-md-2 py-lg-4 py-xxl-5">
    <h2 class="h1 text-center pt-1 pt-sm-4 mb-1">A few important stats</h2>
    <p class="text-center mx-auto pb-3 mb-3 mb-lg-4" style="max-width: 480px;">Here is what we can tell from the data so
      far</p>
    <div class="row g-4 pb-2 pb-sm-4 mb-sm-2">
      <!-- Item-->
      <div class="col-md-5">
        <div class="card border-0 h-100">
          <div class="card-body">
            <div class="">
              <h1 class="display-2 text-primary mb-0">{{ total_organisations }}</h1>
              <h3>Organisations</h3>
              <p class="pb-3 mb-1 mb-xl-3">Total number of LGBT & Sex Work organisations on Data Waffe</p><a
                class="btn btn-link p-0" href="/organisations">Learn more<i class="ai-arrow-right ms-2"></i></a>
            </div>
          </div>
        </div>
      </div>
      <!-- Item-->
      <div class="col-md-7">
        <div class="card border-0 h-100">
          <div class="card-body overflow-hidden">
            <div class="d-sm-flex align-items-center"><a class="d-block order-sm-2 flex-shrink-0 mt-n4 mb-n2"
                href="#"><img src="{% static 'images/uganda.png' %}" width="250" alt="Image"></a>
              <div class="order-sm-1 pe-sm-3 me-xl-4">
                <h1 class="display-2 text-primary mb-0">{{ districts|length }}</h1>
                <h3>Districts covered</h3>
                <p class="mb-4">This represents approximately <strong>{{ percent_districts }}%</strong> of the total
                  districts in Uganda</p>
                <a class="btn btn-link p-0" href="/map">Learn more<i class="ai-arrow-right ms-2"></i></a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Item-->
      <div class="col-md-7">
        <div class="card border-0 h-100">
          <div class="card-body overflow-hidden">
            <div class="d-sm-flex align-items-center">
              <a class="d-block order-sm-2 flex-shrink-0 mt-n4 mb-n2" href="#"><img class="d-dark-mode-none"
                  src="{% static 'images/landing/saas-2/features/03-light.png' %}" width="308" alt="Image"><img
                  class="d-none d-dark-mode-block" src="{% static 'images/landing/saas-2/features/03-dark.png' %}"
                  width="308" alt="Image"></a>
              <div class="order-sm-1 pe-sm-3 me-xl-4">
                <h1 class="display-2 text-primary mb-0">{{ communities|length }}</h1>
                <h3>Key populations</h3>
                {% for community in communities %}
                <div class="me-2 mb-2">
                  <span class="d-inline-block rounded-circle community-icon"
                    style="width: .625rem; height: .625rem; background-color: {{community.color }};"></span>&nbsp;{{ community.title }}
                </div>
                {% endfor %}
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Item-->
      <div class="col-md-5">
        <div class="card border-0 h-100">
          <div class="card-body">
            <div class="">
              <h1 class="display-2 text-primary mb-0">{{ orgs_w_tollfree|length }}</h1>
              <h3>Organisations with toll-free numbers</h3>
              <ul class="list-unstyled">
                {% for org in orgs_w_tollfree %}
                <a href="{{ org.url }}" style="text-decoration:none;">
                  <li class="d-flex pb-1 mb-2">
                    <span class="badge bg-faded-warning text-primary fs-sm">
                      <i class="ai-phone-out text-primary fs-5 mt-n1 me-2"></i>{{ org.title }}
                    </span>
                  </li>
                </a>
                {% endfor %}
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<section class="overflow-hidden pt-5 mt-md-3 mt-lg-2 mt-xl-4 mt-xxl-5">
  <div class="container pt-2 pt-sm-4 pt-lg-5">
    <h2 class="h1 text-center pb-3 mb-3 mb-lg-4">Going deeper</h2>
    <div class="row align-items-center position-relative pb-5 pb-lg-0 mb-1 mb-sm-2 mb-md-4 mb-lg-0">
      <div class="col-md-6 col-xl-5 offset-lg-1 order-md-2 pb-2 pb-md-0 mb-4 mb-md-0" data-aos="fade-left"
        data-aos-duration="500" data-aos-offset="250" data-disable-parallax-down="md">

        <div style="max-width: 525px;margin: 0 auto;" id="keyPopReachCanvas">
          <canvas id="keyPopReachChart"></canvas>
        </div>
      </div>
      <div class="col-md-6 col-lg-5 col-xl-4 offset-xl-1 order-md-1" data-aos="fade-right" data-aos-duration="500"
        data-aos-offset="250" data-disable-parallax-down="md">
        <div class="pe-md-4 pe-lg-0">
          <h3 class="h2 mb-3 mb-lg-4">Key populations reached</h3>
          <p class="pb-1 pb-lg-0 mb-4 mb-lg-5">Organisations have been able to offer services and support to <strong>{{ global_total_reach.global_total_reach|intcomma }}</strong> people in key populations across Uganda</p>
          <div style="max-width: 50rem;margin: 0 auto;" class="table-responsive collapse" id="collapsedReachTable">
            <table class="table table-striped fs-sm">
                <thead>
                    <tr class="bg-faded-primary">
                    <th>Key population</th>
                    <th>Est. reach</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in reachData %}
                    <tr>
                        <td><span class="d-inline-block rounded-circle community-icon"
                          style="width: .625rem; height: .625rem; background-color: {% get_community_color row.community_id %};"></span>&nbsp;{% get_community_name row.community_id %}</td>
                        <td class="text-center">{{ row.total_reach|intcomma }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
          </div>
          <div class="mt-3">
            <a href="#collapsedReachTable" class="btn btn-outline-primary rounded-pill" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="collapsedReachTable">
                Show/hide reach data
            </a>
        </div>
        </div>
      </div>
    </div>
    <!-- Arrow-->
    <div class="d-none d-lg-flex justify-content-center" data-aos="fade-in" data-aos-duration="500"
      data-aos-offset="250">
      <svg class="d-block text-primary" width="339" height="365" viewBox="0 0 339 365" fill="none"
        xmlns="http://www.w3.org/2000/svg" style="margin-left: -80px; margin-top: -140px; margin-bottom: -108px;">
        <path d="M324 291.371C120.111 291.37 240.756 58.7225 1.00032 73.2606" stroke="url(#arrow1)" stroke-width="2"
          stroke-linecap="round" stroke-dasharray="6 6"></path>
        <path
          d="M337.375 290.62C338.074 290.998 338.074 292.001 337.375 292.379L328.476 297.196C327.81 297.557 327 297.074 327 296.317L327 286.683C327 285.925 327.81 285.443 328.476 285.803L337.375 290.62Z"
          fill="currentColor"></path>
        <defs>
          <linearGradient id="arrow1" x1="324" y1="291.5" x2="-2.99974" y2="72.4997" gradientUnits="userSpaceOnUse">
            <stop offset="0" stop-color="currentColor"></stop>
            <stop offset="1" stop-color="currentColor" stop-opacity="0"></stop>
          </linearGradient>
        </defs>
      </svg>
    </div>
    <div class="row align-items-center position-relative pb-5 pb-lg-0 mb-1 mb-sm-2 mb-md-4 mb-lg-0">
      <div class="col-md-6 col-xl-5 offset-xl-1 pb-2 pb-md-0 mb-4 mb-md-0" data-aos="fade-right" data-aos-duration="500"
        data-aos-offset="250" data-disable-parallax-down="md">
        {% comment %} <div style="max-width: 525px;margin: 0 auto;" id="servicesChartCanvas">
          <canvas id="servicesPieChart"></canvas>
        </div> {% endcomment %}
        <!-- Table -->
        <table class="table table-striped">
          <thead>
              <tr class="bg-faded-primary">
              <th>Services</th>
              <th>Organisations</th>
              <th>Percentage</th>
              </tr>
          </thead>
          <tbody>
              {% for row in servicesData %}
              <tr>
                  <td>{{ row.title }}</td>
                  <td class="text-center">{{ row.total_orgs }}</td>
                  <td class="text-center">{{ row.percentile }}</td>
              </tr>
              {% endfor %}
          </tbody>
        </table>
      </div>
      <div class="col-md-6 col-lg-5 col-xl-4 offset-lg-1" data-aos="fade-left" data-aos-duration="500"
        data-aos-offset="250" data-disable-parallax-down="md">
        <div class="ps-md-4 ps-lg-0">
          <h3 class="h2 mb-3 mb-lg-4">Issues and services</h3>
          <p class="pb-1 pb-lg-0 mb-4 mb-lg-5">The organisations are focused on a broad number of issues depending on
            their mandate. These issues inform their programmes and activities in the communities they support</p>
        </div>
      </div>
    </div>
    <!-- Arrow-->
    <div class="d-none d-lg-flex justify-content-center" data-aos="fade-in" data-aos-duration="500"
      data-aos-offset="250">
      <svg class="d-block text-primary" width="263" height="275" viewBox="0 0 263 275" fill="none"
        xmlns="http://www.w3.org/2000/svg" style="margin-top: -60px; margin-left: -120px; margin-bottom: -80px;">
        <path
          d="M8.13678 249.647C7.47108 250.081 6.59001 249.602 6.59106 248.808L6.60444 238.689C6.60544 237.931 7.4158 237.45 8.08162 237.811L16.5478 242.408C17.2136 242.77 17.2512 243.712 16.6163 244.125L8.13678 249.647Z"
          fill="currentColor"></path>
        <path
          d="M261.961 37.8891C216.908 65.6243 128.226 135.486 133.916 193.05C141.029 265.005 265.134 173.468 173.666 148.634C89.2542 125.715 30.9125 210.547 13.9796 236.702"
          stroke="url(#arrow2)" stroke-width="2" stroke-linecap="round" stroke-dasharray="6 6"></path>
        <defs>
          <linearGradient id="arrow2" x1="13.9797" y1="234.5" x2="276.704" y2="60.1939" gradientUnits="userSpaceOnUse">
            <stop offset="0" stop-color="currentColor"></stop>
            <stop offset="1" stop-color="currentColor" stop-opacity="0"></stop>
          </linearGradient>
        </defs>
      </svg>
    </div>
    <div class="row align-items-center position-relative pb-5 pb-lg-0 mb-1 mb-sm-2 mb-md-4 mb-lg-0">
      <div class="col-md-6 col-xl-5 offset-lg-1 order-md-2 pb-2 pb-md-0 mb-4 mb-md-0" data-aos="fade-left"
        data-aos-duration="500" data-aos-offset="250" data-disable-parallax-down="md">

        <div style="max-width: 525px;margin: 0 auto;" id="violationsPieChartCanvas">
          <canvas id="violationsPieChart"></canvas>
        </div>
      </div>
      <div class="col-md-6 col-lg-5 col-xl-4 offset-xl-1 order-md-1" data-aos="fade-right" data-aos-duration="500"
        data-aos-offset="250" data-disable-parallax-down="md">
        <div class="pe-md-4 pe-lg-0">
          <h3 class="h2 mb-3 mb-lg-4">On human rights violations and abuses</h3>
          <p class="pb-1 pb-lg-0 mb-4 mb-lg-5">Everyday, members of key populations endure various violations that
            significantly reduce the quality of their lives. Looking at the data, there are an estimated <strong>{{ global_total_violations.global_total_violations|intcomma }}</strong> recorded violations on key populations going back to 2020</p>
          <div style="max-width: 50rem;margin: 0 auto;" class="table-responsive collapse" id="collapsedViolationsTable">
            <table class="table table-striped fs-sm">
                <thead>
                    <tr class="bg-faded-primary">
                    <th>Violation</th>
                    <th>Recorded occurences</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in violationsData %}
                    <tr>
                        <td><span class="d-inline-block rounded-circle community-icon"
                          style="width: .625rem; height: .625rem; background-color: {% generate_violation_hex row.violation_id %};"></span>&nbsp;{% get_violation row.violation_id %}</td>
                        <td class="text-center">{{ row.total_occurences|intcomma }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
          </div>
          <div class="mt-3">
            <a href="#collapsedViolationsTable" class="btn btn-outline-primary rounded-pill" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="collapsedViolationsTable">
                Show/hide violations data
            </a>
        </div>
        </div>
      </div>
    </div>

  </div>
</section>

<section class="overflow-hidden my-5 py-5 mb-lg-3 mb-xl-4 mb-xxl-5">
  <div class="container py-5 mb-2 mb-lg-3">
    <!-- Parallax here -->
    <div class="position-relative mx-auto" style="max-width: 1198px;">
      <div class="position-relative zindex-3 aos-init aos-animate" data-aos="fade-left" data-aos-duration="600"
        data-aos-offset="300"><img src="{% static 'images/landing/landing-img1.png' %}" alt="Image"></div>
      <div class="position-absolute top-0 start-0 zindex-2 aos-init aos-animate" data-aos="fade-right"
        data-aos-duration="600" data-aos-offset="300"><img src="{% static 'images/landing/landing-img2.png' %}"
          alt="Image"></div>
      <div class="position-absolute top-0 start-0 zindex-4 aos-init aos-animate" data-aos="zoom-in"
        data-aos-duration="500" data-aos-offset="300" data-aos-delay="900" data-aos-easing="ease-out-back">
        <svg class="w-100 h-100 text-info" width="1198" height="693" viewBox="0 0 1198 693" fill="currentColor"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M579.362 65.02c1.689-.051 3.25-1.264 4.785-1.89l2.699-1.2 1.203-.587c-.051.026 1.446-.69.704-.613 3.147-.345 2.571-4.916-.589-4.303-.844.166-1.33.626-2.008 1.098-.909.638-1.907 1.2-2.879 1.711l-2.827 1.443c-.653.409-1.19 1.034-1.881 1.379-1.433.715-.729 3.013.793 2.962zm-27.74-8.747c1.56.357 3.428-.792 4.835-1.405.998-.434 1.945-.983 2.917-1.481.665-.332 1.484-.97 1.983-1.239 1.753-.907 1.036-4.163-1.062-3.907-1.126.14-1.471.587-2.239 1.302-.614.562-1.522 1.073-2.2 1.571l-4.452 3.397c-.678.421-.627 1.57.218 1.762zm22.666-6.037l.077.153c.217.472.908.868 1.433.817 1.356-.141 2.571-.919 3.812-1.481l3.505-1.711c2.546-.958 1.587-4.648-1.125-4.099-1.766.358-3.467 1.941-5.028 2.796-1.177.677-3.441 1.852-2.674 3.524zm29.078 9.805c1.65.69 3.761-.702 5.271-1.328 1.612-.664 3.224-1.073 4.541-2.273 1.766-1.622-1.01-4.38-2.622-2.618-.896.983-2.252 1.328-3.403 1.928l-4.056 2.273c-.882.536-.588 1.66.269 2.017zm7.491 14.504c2.533-1.073 4.555-3.103 6.909-4.469.87-.511.947-1.826.409-2.579-.627-.881-1.727-.907-2.584-.409-1.152.677-2.111 1.698-3.16 2.528-1.062.83-2.431 1.545-3.25 2.617-.857 1.136.269 2.911 1.676 2.311zm-8.731 22.483c2.265-2.464 4.683-4.801 6.909-7.278 2.188-2.439-1.829-5.516-3.544-2.732-.473.779-1.049 1.417-1.471 2.234-.499.945-1.088 1.813-1.715 2.682-.946 1.315-2.418 2.86-2.085 4.584.141.843 1.356 1.111 1.906.511zm-23.927 4.292c1.433-.307 2.814-1.673 3.723-2.771.985-1.187 2.226-2.171 2.904-3.588 1.164-2.439-2.917-4.15-3.877-1.622-.921 2.452-4.311 4.035-4.196 6.87.025.664.806 1.251 1.446 1.111zm-20.46 13.752c-.013.306.55-.588.691-.792.448-.651.832-1.341 1.215-2.018.819-1.468 1.856-2.758 2.726-4.188 1.292-2.094-2.252-4.073-3.263-1.902l-2.597 5.924c-.461 1.213-1.331 2.439-.384 3.64.55.702 1.574.063 1.612-.664zm-15.532-2.812c1.177-.306 2.06-2.209 2.636-3.167.46-.766.831-1.596 1.254-2.387.025-.039.806-1.711.192-.703.217-.357.665-.574.895-.995.665-1.213-.141-3.282-1.765-3.065-2.943.383-2.854 3.831-3.672 6.103-.192.524-1.485 4.725.46 4.214zm17.857-15.767c.243-.204.781-.332 1.1-.485.909-.447 1.728-1.047 2.521-1.647 1.407-1.047 2.981-2.158 4.107-3.499 1.458-1.737-.742-3.92-2.482-2.477-.806.664-1.472 1.507-2.188 2.26l-2.508 2.413c-.819.83-2.392 1.979-1.714 3.294.243.434.831.434 1.164.141zm-14.918-2.936c.602-1.149 1.024-2.273 1.408-3.524.32-1.047.921-1.915 1.228-2.937.448-1.456-1.292-2.771-2.584-1.979-1.433.881-1.484 2.503-1.459 4.022.038 1.392-.294 3.141.294 4.405.205.447.909.421 1.113.013zm57.587-50.408l5.194.306c2.034.051 4.081.741 5.718-.702.563-.498.563-1.545 0-2.056-1.714-1.52-4.35-.868-6.486-.6-1.535.191-3.646.026-5.028.83-1.061.638-.537 2.145.602 2.222zm26.732 4.633c-.409 1.29 1.408 1.839 2.329 2.017l6.946 1.468c2.431.702 3.39-3.345 1.011-3.677-2.072-.294-4.209-.358-6.294-.268-.934.038-2.584.472-3.454.153-.218-.077-.474.102-.538.306zm3.38 14.008c1.753.702 3.377 1.264 5.232 1.647 1.408.294 3.16.792 4.58.677 1.612-.128 2.597-2.03 1.356-3.281-1.356-1.366-3.377-.843-5.117-.932-1.829-.102-4.324-.613-6.064.064-.882.37-.882 1.481.013 1.826zm8.212 14.185c3.365 1.379 7.241.472 10.721 1.328 3.748.932 3.774-5.427 0-4.482-3.48.868-7.356-.051-10.721 1.328-.882.37-.895 1.456 0 1.826zm-50.489 29.84c-.716.038-1.023.319-1.561.766l-2.443 2.069c-1.305 1.187-2.239 2.464-3.288 3.856-1.203 1.583 1.074 3.435 2.584 2.579.755-.421.908-.894 1.267-1.622.409-.829 1.01-1.583 1.586-2.311.973-1.213 2.431-2.592 2.751-4.162.115-.562-.256-1.213-.896-1.175zm-17.324 10.214c-1.023.791-1.356 1.979-1.727 3.166-.575 1.839-.742 3.614-.857 5.542-.153 2.707 4.414 2.681 4.184 0-.154-1.839-.307-3.576-.167-5.414.077-.958.282-2.477-.575-3.18-.218-.178-.602-.306-.858-.114zm-22.837 9.935c-.448 1.341.422 3.052.716 4.379.307 1.354.64 2.746 1.369 3.933 1.894 3.103 6.282-.83 3.711-2.86-.857-.677-1.28-1.507-1.74-2.477l-.806-1.698c-.295-.575-.781-1.009-1.088-1.558-.512-.919-1.842-.651-2.162.281zM531.155 95.51c.806-1.009 1.561-1.954 2.098-3.141l1.689-4.175c1.177-2.911-3.864-4.443-4.811-1.328l-1.139 4.226c-.345 1.251-1.215 2.273-.793 3.626.371 1.162 2.073 1.89 2.956.792zm8.903-21.707c.78-.868 1.74-1.558 2.482-2.477.716-.881 1.369-2.081 2.239-2.809 2.303-1.941-1.165-5.516-3.34-3.333-.524.536-.831 1.111-1.202 1.749-.41.715-.96 1.354-1.357 2.069-.742 1.366-1.573 2.567-1.189 4.188.23.996 1.663 1.392 2.367.613zm42.435 8.175c1.791-.473 3.621-1.456 5.092-2.567 1.279-.97 3.083-1.941 3.991-3.294 1.331-1.979-1.906-3.869-3.211-1.877-.179.281-.831.562-1.113.779l-2.494 2.005c-1.241.945-3.02 1.532-3.787 2.962-.55 1.034.345 2.311 1.522 1.992zm-23.063-3.834c.32-.523.934-.83 1.369-1.251.499-.472.883-1.047 1.318-1.583.959-1.149 2.239-1.979 3.198-3.116 1.548-1.839-.78-4.15-2.622-2.618-1.421 1.175-2.598 2.924-3.493 4.52-.653 1.162-1.971 2.707-1.293 4.048.32.6 1.203.536 1.523 0zm62.284 2.389c1.138.217 2.2.064 3.313-.204 1.152-.268 2.342-.255 3.506-.46 2.239-.383 1.241-4.175-.947-3.422-.921.319-1.906.434-2.815.779-.895.332-1.804.983-2.75 1.098-1.139.153-1.664 1.954-.307 2.209zm36.932-17.275c.256 2.017 2.431 2.796 4.069 3.601l1.765.868c-.102-.051.704.434.512.281-.397-.294.767.728.908.805 1.318.702 3.019.102 3.429-1.392l.038-.141c.217-.779.026-1.826-.627-2.375-1.087-.919-2.264-1.124-3.62-1.341-1.689-.281-3.301-.868-4.887-1.507-.704-.281-1.676.447-1.587 1.2zm-125.755 53.139c-.09 1.673.601 3.626 1.164 5.184.614 1.698 1.766 3.486 3.813 3.077.998-.204 1.407-1.289 1.241-2.183-.141-.766-.614-1.047-1.062-1.596-.32-.396-.563-.932-.806-1.379l-.909-1.698c-.409-.754-.882-1.29-1.356-1.967-.64-.906-2.034-.574-2.085.562z">
          </path>
        </svg>
      </div>
      <div class="position-absolute top-0 start-0 aos-init aos-animate" data-aos="fade-up" data-aos-duration="600"
        data-aos-offset="300" data-aos-delay="600" data-aos-easing="ease-out-back">
        <svg class="w-100 h-100 text-warning" width="1198" height="693" viewBox="0 0 1198 693" fill="currentColor"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M828.762 131.524c-38.952 16.753-134.813 136.894-54.172 163.269 29.536 9.657 62.546 1.819 92.465 13.085 33.408 12.588 60.283 32.772 97.566 29.519 31.269-2.729 42.409-28.44 45.229-56.387 2.93-29.041 12.95-35.606 31.06-57.194 14.93-17.793 25.09-41.532 6.11-59.579-20.29-19.286-53.376-9.385-78.904-10.343-17.496-.656-35.976-2.91-50.929-11.198-8.325-4.62-17.067-11.049-26.502-13.973-19.456-5.976-44.603-4.649-61.923 2.801z">
          </path>
        </svg>
      </div>
    </div>

    <h2 class="h1 text-center mt-5">Working together to go further</h2>
    <p class="text-center mb-0">Join over {{ total_organisations }} LGBT and sex work organisations making impact in key
      populations across Uganda</p>
  </div>

  <!-- org logos -->
  <div class="swiper pb-4" data-swiper-options="{
    &quot;spaceBetween&quot;: 24,
    &quot;loop&quot;: true,
    &quot;grabCursor&quot;: false,
    &quot;centeredSlides&quot;: true,
    &quot;autoplay&quot;: {
      &quot;delay&quot;: 0,
      &quot;disableOnInteraction&quot;: false
    },
    &quot;freeMode&quot;: true,
    &quot;speed&quot;: 10000,
    &quot;freeModeMomentum&quot;: false,
    &quot;breakpoints&quot;: {
      &quot;0&quot;: { &quot;slidesPerView&quot;: 2 },
      &quot;400&quot;: { &quot;slidesPerView&quot;: 3 },
      &quot;600&quot;: { &quot;slidesPerView&quot;: 4 },
      &quot;800&quot;: { &quot;slidesPerView&quot;: 5 },
      &quot;1200&quot;: { &quot;slidesPerView&quot;: 6 },
      &quot;1400&quot;: { &quot;slidesPerView&quot;: 7 },
      &quot;1600&quot;: { &quot;slidesPerView&quot;: 8 }
    }
  }">
    <div class="swiper-wrapper" style="transition-timing-function: linear !important;">
      {% for item in first_orgs %}
      <div class="swiper-slide">
        <div class="bg-gray rounded-4 py-3 d-flex aligns-items-center justify-content-center" data-bs-toggle="popover"
          data-bs-placement="top" data-bs-trigger="hover" title="{{ item.title }}">
          {% if item.logo %}
          {% image item.logo width-200 as logo %}
          <img class="d-block d-dark-mode-none mx-auto" src="{{ logo.url }}" width="100" alt="{{ item.title }} Logo">
          <img class="d-none d-dark-mode-block mx-auto" src="{{ logo.url }}" width="100" alt="{{ item.title }} Logo">
          {% else %}
          <img class="d-block d-dark-mode-none mx-auto" src="{% static 'images/dw_logo.png' %}" width="100"
            alt="{{ item.title }} Logo">
          <img class="d-none d-dark-mode-block mx-auto" src="{% static 'images/dw_logo.png' %}" width="100"
            alt="{{ item.title }} Logo">
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  <!-- reverse org list -->
  <div class="swiper" dir="rtl" data-swiper-options="{
    &quot;spaceBetween&quot;: 24,
    &quot;loop&quot;: true,
    &quot;grabCursor&quot;: false,
    &quot;centeredSlides&quot;: true,
    &quot;autoplay&quot;: {
      &quot;delay&quot;: 0,
      &quot;disableOnInteraction&quot;: false
    },
    &quot;freeMode&quot;: true,
    &quot;speed&quot;: 8500,
    &quot;freeModeMomentum&quot;: false,
    &quot;breakpoints&quot;: {
      &quot;0&quot;: { &quot;slidesPerView&quot;: 2 },
      &quot;400&quot;: { &quot;slidesPerView&quot;: 3 },
      &quot;600&quot;: { &quot;slidesPerView&quot;: 4 },
      &quot;800&quot;: { &quot;slidesPerView&quot;: 5 },
      &quot;1200&quot;: { &quot;slidesPerView&quot;: 6 },
      &quot;1400&quot;: { &quot;slidesPerView&quot;: 7 },
      &quot;1600&quot;: { &quot;slidesPerView&quot;: 8 }
    }
  }">

    <div class="swiper-wrapper" style="transition-timing-function: linear !important;">
      {% for item in last_orgs %}
      <div class="swiper-slide">
        <div class="bg-gray rounded-4 py-3 d-flex aligns-items-center justify-content-center" data-bs-toggle="popover"
          data-bs-placement="bottom" data-bs-trigger="hover" title="{{ item.title }}">
          {% if item.logo %}
          {% image item.logo width-200 as logo %}
          <img class="d-block d-dark-mode-none mx-auto" src="{{ logo.url }}" width="100" alt="{{ item.title }} Logo">
          <img class="d-none d-dark-mode-block mx-auto" src="{{ logo.url }}" width="100" alt="{{ item.title }} Logo">
          {% else %}
          <img class="d-block d-dark-mode-none mx-auto" src="{% static 'images/dw_logo.png' %}" width="100"
            alt="{{ item.title }} Logo">
          <img class="d-none d-dark-mode-block mx-auto" src="{% static 'images/dw_logo.png' %}" width="100"
            alt="{{ item.title }} Logo">
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<section class="container pt-2 pt-sm-4 pb-5">
  <h2 class="h1 text-center pb-3 pb-lg-4">Featured publications</h2>
  <div class="row row-cols-1 row-cols-md-3 g-3">
    {% for publication in publications %}
    <div class="col">
      <div class="card bg-faded-primary border-0 h-100 overflow-hidden py-3 pt-xl-4 px-lg-3 px-xl-4">
        <div class="card-body position-relative zindex-2 pb-0">
          <h3 class="h4 card-title text-primary">{{ publication.title }}</h3>
          <p class="card-text text-primary pb-sm3 pb-md-4 mb-2">{{ publication.summary }}</p><a
            class="btn btn-lg btn-link px-0" href="{{ publication.url }}">Read publication<i
              class="ai-arrow-right ms-2"></i></a>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  <!-- More button-->
  <div class="text-center my-2 mt-sm-3 mt-lg-0 pt-4 pb-1 pb-sm-3 pb-md-4 pt-lg-5"><a class="btn btn-outline-primary"
      href="{{ indexpages.publications }}">View all publications</a></div>
</section>

<!-- Blog-->
<section class="container mb-sm-2 mb-md-0 my-lg-3 my-xl-4 my-xxl-5">
  <h2 class="h1 text-center text-sm-start pb-3 pt-2 pt-sm-3 pt-md-4 pt-xl-5 mt-lg-2 mb-3 mb-lg-4">Our blog</h2>
  <div class="row">
    <div class="col-lg-6 pb-3 mb-2 mb-sm-3">
      {% image latest_article.image width-650 as featimg %}
      <a class="card h-100 border-0 rounded-1 overflow-hidden text-decoration-none bg-size-cover bg-position-center"
        href="{{ latest_article.url }}"
        style="max-width: 600px; min-height: 300px; background-image: url({{ featimg.url }});">
        <div class="bg-dark position-absolute top-0 start-0 w-100 h-100 opacity-50"></div>
        <div
          class="card-body dark-mode d-flex flex-column justify-content-end dark-mode h-100 position-relative zindex-2">
          <h3>{{ latest_article.title }}</h3>
          <p class="mb-0">{{ latest_article.introduction }}</p>
        </div>
      </a></div>
    <div class="col-lg-6">
      <div class="row row-cols-1 row-cols-sm-2 g-4">
        {% for post in other_articles %}
        <article class="col">
          <div class="pb-4 pt-2 pt-xl-3 ms-md-3 border-bottom">
            <h3 class="h4"><a href="#">{{ post.title }}</a></h3>
            <p class="mb-4">{{ post.introduction }}</p>
            <div class="d-flex align-items-center"><span class="fs-sm text-muted">{{ post.date|naturaltime }}</span>
              <span class="fs-xs opacity-20 mx-3">|</span>
              {% for type in post.blog_page_type.all %}
              <a class="badge text-nav fs-xs border me-2" href="#">{{ type.name }}</a>
              {% endfor %}
            </div>
          </div>
        </article>
        {% endfor %}
      </div>
    </div>
  </div>
  <div class="text-end pb-md-4 pt-3 mt-2 mt-sm-3 mt-lg-4"><a
      class="d-inline-flex align-items-center fw-semibold text-decoration-none" href="{{ indexpages.blog }}">All
      articles<i class="ai-arrow-right fs-4 ms-2"></i></a></div>
</section>

{% endblock content %}

{% block javascript %}
<script src="{% static 'vendor/parallax-js/dist/parallax.min.js' %}"></script>
<script src="{% static 'vendor/swiper/swiper-bundle.min.js' %}"></script>
<script src="{% static 'vendor/aos/dist/aos.js' %}"></script>
<script src="{% static 'vendor/chart.js/dist/chart.umd.js' %}"></script>
{% endblock javascript %}


{% block inline_javascript %}
<script>
  const keyPopPieCtx = document.getElementById('keyPopReachChart');
  const servicesPieCtx = document.getElementById('servicesPieChart');
  const violationsPieCtx = document.getElementById('violationsPieChart');

  // Key populations doughnut
  new Chart(keyPopPieCtx, {
    type: 'doughnut',
    "data": {
      "labels": [{% for dataset in reachPieChartSeries %}"{% get_community_acronym dataset.community_id %}", {% endfor %}],
      datasets: [{
        label: 'People reached',
        data: [{% for dataset in reachPieChartSeries %}{{ dataset.total_reach }}, {% endfor %}],
        backgroundColor: [{% for dataset in reachPieChartSeries %}'{% get_community_color dataset.community_id %}59', {% endfor %}],
        borderColor: [{% for dataset in reachPieChartSeries %}'{% get_community_color dataset.community_id %}', {% endfor %}],
        borderWidth: 1
      }]
    },
    "options": {
      "responsive": true,
      "aspectRatio": 1,
      "plugins": {
        "legend": {
          "position": "right",
          "labels": {
            "usePointStyle": true,
            "boxWidth": 12,
            "boxHeight": 12,
            "useBorderRadius": true,
            "borderRadius": 8,
            "padding": 20,
            "font": {
              "family": "'Kumbh Sans', sans-serif",
              "size": 14
            }
          }
        }
      }
    },
  });

  //Services doughnut
  new Chart(servicesPieCtx, {
    type: 'doughnut',
    "data": {
      "labels": [{% for dataset in servicesPieChartSeries %}"{{ dataset.title }}", {% endfor %}],
      datasets: [{
        label: 'Organisations',
        data: [{% for dataset in servicesPieChartSeries %}{{ dataset.total_orgs }}, {% endfor %}],
        backgroundColor: ["#ed5050", "#448c74", "#edcb50", "#e3e9ef", "#3f7fca"],
        borderColor: ["#ed5050", "#448c74", "#edcb50", "#e3e9ef", "#3f7fca"],
        borderWidth: 1
      }]
    },
    "options": {
      "responsive": true,
      "aspectRatio": 1,
      "plugins": {
        "legend": {
          "display": false,
          "position": "right",
          "labels": {
            "usePointStyle": true,
            "boxWidth": 12,
            "boxHeight": 12,
            "useBorderRadius": true,
            "borderRadius": 8,
            "padding": 20,
            "font": {
              "family": "'Kumbh Sans', sans-serif",
              "size": 14
            }
          }
        }
      }
    },
  });

  // Violations doughnut
  new Chart(violationsPieCtx, {
    type: 'doughnut',
    "data": {
      "labels": [{% for dataset in violationsPieChartSeries %}"{% get_violation dataset.violation_id %}", {% endfor %}],
      datasets: [{
        label: 'Occurrences',
        data: [{% for dataset in violationsPieChartSeries %} {{ dataset.total_occurences }}, {% endfor %}],
        backgroundColor: [{% for dataset in violationsPieChartSeries %}'{% generate_violation_hex dataset.violation_id %}BF', {% endfor %}],
        borderColor: [{% for dataset in violationsPieChartSeries %}'{% generate_violation_hex dataset.violation_id %}', {% endfor %}],
        borderWidth: 1
      }]
    },
    "options": {
      "responsive": true,
      "aspectRatio": 1,
      "plugins": {
        "legend": {
          "display": false,
          "position": "right",
          "labels": {
            "usePointStyle": true,
            "boxWidth": 12,
            "boxHeight": 12,
            "useBorderRadius": true,
            "borderRadius": 8,
            "padding": 10,
            "font": {
              "family": "'Kumbh Sans', sans-serif",
              "size": 12
            }
          }
        }
      }
    }
  });

</script>
{% endblock inline_javascript %}
